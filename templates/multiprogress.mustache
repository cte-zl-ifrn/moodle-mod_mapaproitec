<style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

    .block_multiprogress.block {
        border: none;
    }
    .block_multiprogress_container {
        font-family: Arial, sans-serif;
        text-align: center;
    }
    .block_multiprogress_container a{
       text-decoration: none;
    }
    .block_multiprogress_container a:hover{
       font-weight: bold;
    }
    .block_multiprogress_header {
        display: flex;
        justify-content: center;
        margin: auto;
    }
    .block_multiprogress_title {
        font-family: "Montserrat", sans-serif;
        font-size: 26px;
        font-weight: 400;
        margin-bottom: 20px;
        max-width: 350px;
        text-align: center;
    }
    .block_multiprogress_book {
        margin-bottom: 20px;
        width: 110px;
    }
    .block_multiprogress_stone {
        align-items: center;
        display: flex;
        margin-bottom: 20px;
    }
    .block_multiprogress_stone img {
        margin-right: 10px;
        width: 80px;
    }
    .block_multiprogress_stone > div {
        width: 100%;
    }
    .block_multiprogress_stone > div > span {
        display: block;
        color: #1D1D1B;
        text-align: left;
        font-family: "Montserrat", sans-serif;
        font-size: 15px;
        font-weight: 500;
        text-decoration: none;
    }
    .block_multiprogress_stone > div > div {
        display: flex
    }
    .block_multiprogress_progress {
        background-color: #f3f3f3;
        border-radius: 5px;
        margin-right: 10px;
        overflow: hidden;
        width: 100%;
    }
    .block_multiprogress_progress-bar {
        background-color: #F8B133;
        max-height: 23px;
        height: 100%;
    }
    .block_multiprogress_percentage {
        color: #1D1D1B;
        font-family: "Montserrat", sans-serif;
        font-weight: 500;
        text-align: right;
        width: 50px;
    }
    .show_more_link {
        color: #007bff;
        text-decoration: none;
        font-family: "Montserrat", sans-serif;
        font-weight: 500;
    }
    .hidden {
      display: none;
    }
</style>

<div class="block_multiprogress_container">
    <div class="block_multiprogress_header hidden">
        <div class="block_multiprogress_title">Conquiste todas as pedras para abrir o livro mágico.</div>
        <div class="block_multiprogress_book">
            <img src="{{config.wwwroot}}/blocks/multiprogress/assets/img/livro.png" alt="Livro mágico">
        </div>
    </div>
    {{#courses}}

    <a href="view.php?id={{course_id}}" data-course_idnumber="{{course_idnumber}}" data-total_modules="{{total_modules}}" data-total_modules="{{completed_modules}}">
        <div class="block_multiprogress_stone {{isactive}}">
        <style>
          .glow-{{course_id}}:hover {
            filter: drop-shadow(0 0 10px rgba({{stone_color}}, 1) );
            animation: pulse-{{course_id}} 2s infinite ease-in-out;
          }
          @keyframes pulse-{{course_id}} {
            0%, 100% {
              filter: drop-shadow(0 0 10px rgba({{stone_color}}, .5));
          }
          50% {
            filter: drop-shadow(0 0 20px rgba({{stone_color}}, 1));
          }
        </style>
            <img src="{{course_image_url}}" class="glow-{{course_id}}" alt="{{course_alias}}" />
            <div>
                <span>
                    {{course_alias}}<br />
                    {{course_subtitle}}
                </span>                    
                <div>
                    <div class="block_multiprogress_progress">
                        <div class="block_multiprogress_progress-bar" style="width: {{completion_percentage}}%;"></div>
                    </div>
                    <div class="block_multiprogress_percentage">{{completion_percentage}}%</div>
                </div>                    
            </div>
        </div>
    </a>
    {{/courses}}
    <div class="show_more">
        <a href="javascript:void(0);" class="show_more_link">Mostrar mais</a>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.show_more_link').forEach(function (link) {
        link.addEventListener('click', function () {
          document.querySelectorAll('.block_multiprogress_stone').forEach(function (el) {
              el.classList.toggle('hidden');
          });
          document.querySelectorAll('.block_multiprogress_header').forEach(function (el) {
              el.classList.toggle('hidden');
          });

          this.textContent = this.textContent === 'Mostrar mais' ? 'Mostrar menos' : 'Mostrar mais';
        });
      });
    });
</script>
